<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PYQ Library | KIIT OPENWIRE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        neon: '#00ff88',
                        dark: '#050505',
                    },
                    fontFamily: {
                        mono: ['JetBrains Mono', 'monospace'],
                    }
                }
            }
        }
    </script>
    <style>
        body { background-color: #000; color: #00ff88; font-family: 'JetBrains Mono', monospace; }
        .glass-panel {
            background: rgba(0, 20, 0, 0.7);
            border: 1px solid #00ff88;
        }
        .glass-panel:hover {
            background: rgba(0, 255, 136, 0.1);
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.2);
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    
    <!-- Navbar -->
    <nav class="border-b border-neon/30 bg-black sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-6 h-16 flex items-center justify-between">
            <a href="index.html" class="font-bold text-xl text-neon">> KIIT OPENWIRE</a>
            <a href="index.html" class="text-sm hover:text-white">[ BACK_TO_ROOT ]</a>
        </div>
    </nav>

    <div class="flex flex-col md:flex-row flex-grow">
        <!-- Sidebar -->
        <aside class="w-full md:w-64 border-r border-neon/20 p-6 bg-black">
            <h2 class="text-white font-bold mb-6 border-b border-neon/20 pb-2">FILTERS</h2>
            
            <div class="mb-6">
                <label class="block text-xs text-gray-500 mb-2">BRANCH</label>
                <select id="branch-select" class="w-full bg-black border border-neon/50 text-neon p-2 text-sm focus:outline-none focus:border-neon">
                    <option value="CSE">Computer Science (CSE)</option>
                    <option value="ECE">Electronics (ECE)</option>
                    <option value="EEE">Electrical (EEE)</option>
                    <option value="MECH">Mechanical</option>
                    <option value="CIVIL">Civil</option>
                </select>
            </div>

            <div class="mb-6">
                <label class="block text-xs text-gray-500 mb-2">SEMESTER</label>
                <div class="grid grid-cols-4 gap-2">
                    <button onclick="filterSem(1)" class="sem-btn border border-neon/30 p-2 text-center hover:bg-neon hover:text-black transition-colors text-sm" data-sem="1">1</button>
                    <button onclick="filterSem(2)" class="sem-btn border border-neon/30 p-2 text-center hover:bg-neon hover:text-black transition-colors text-sm" data-sem="2">2</button>
                    <button onclick="filterSem(3)" class="sem-btn border border-neon/30 p-2 text-center hover:bg-neon hover:text-black transition-colors text-sm" data-sem="3">3</button>
                    <button onclick="filterSem(4)" class="sem-btn border border-neon/30 p-2 text-center hover:bg-neon hover:text-black transition-colors text-sm" data-sem="4">4</button>
                    <button onclick="filterSem(5)" class="sem-btn border border-neon/30 p-2 text-center hover:bg-neon hover:text-black transition-colors text-sm" data-sem="5">5</button>
                    <button onclick="filterSem(6)" class="sem-btn border border-neon/30 p-2 text-center hover:bg-neon hover:text-black transition-colors text-sm" data-sem="6">6</button>
                    <button onclick="filterSem(7)" class="sem-btn border border-neon/30 p-2 text-center hover:bg-neon hover:text-black transition-colors text-sm" data-sem="7">7</button>
                    <button onclick="filterSem(8)" class="sem-btn border border-neon/30 p-2 text-center hover:bg-neon hover:text-black transition-colors text-sm" data-sem="8">8</button>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-grow p-6 md:p-12">
            <div class="flex justify-between items-center mb-8">
                <h1 class="text-2xl font-bold text-white">PYQ_LIBRARY <span class="text-neon animate-pulse">_</span></h1>
                <div class="text-xs text-gray-500">INDEXING: <span id="current-filter" class="text-neon">CSE / SEM 1</span></div>
            </div>

            <div id="subject-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Subjects will be injected here -->
            </div>
        </main>
    </div>

    <script src="js/pyq-data.js"></script>
    <script>
        let currentBranch = 'CSE';
        let currentSem = '1';

        // Check URL params
        const urlParams = new URLSearchParams(window.location.search);
        if(urlParams.get('sem')) currentSem = urlParams.get('sem');

        document.getElementById('branch-select').addEventListener('change', (e) => {
            currentBranch = e.target.value;
            renderSubjects();
        });

        function filterSem(sem) {
            currentSem = sem.toString();
            renderSubjects();
            
            // Update UI
            document.querySelectorAll('.sem-btn').forEach(btn => {
                if(btn.dataset.sem === currentSem) {
                    btn.classList.add('bg-neon', 'text-black');
                } else {
                    btn.classList.remove('bg-neon', 'text-black');
                }
            });
        }

        function renderSubjects() {
            document.getElementById('current-filter').innerText = `${currentBranch} / SEM ${currentSem}`;
            const grid = document.getElementById('subject-grid');
            grid.innerHTML = '';

            const subjects = PYQ_DATA[currentBranch]?.[currentSem] || [];

            if (subjects.length === 0) {
                grid.innerHTML = '<div class="col-span-full text-center text-gray-500 py-12">NO_DATA_FOUND_IN_SECTOR</div>';
                return;
            }

            subjects.forEach(sub => {
                const card = document.createElement('div');
                card.className = 'glass-panel p-6 cursor-pointer group relative overflow-hidden';
                card.onclick = () => window.location.href = `subject.html?code=${sub.code}&name=${encodeURIComponent(sub.name)}`;
                
                card.innerHTML = `
                    <div class="absolute top-0 right-0 p-2 opacity-20 text-4xl font-bold group-hover:opacity-40 transition-opacity">${sub.code.substring(0,2)}</div>
                    <div class="text-xs text-gray-500 mb-2">${sub.code}</div>
                    <h3 class="text-xl font-bold text-white mb-4 group-hover:text-neon transition-colors">${sub.name}</h3>
                    <div class="flex gap-2 mb-6">
                        ${sub.years.map(y => `<span class="text-xs border border-neon/30 px-1 text-gray-400">${y}</span>`).join('')}
                    </div>
                    <button class="w-full border border-neon text-neon py-2 text-sm font-bold hover:bg-neon hover:text-black transition-colors">
                        ACCESS_FILES
                    </button>
                `;
                grid.appendChild(card);
            });
        }

        // Init
        filterSem(currentSem);
    </script>
</body>
</html>
